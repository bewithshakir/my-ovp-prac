{"version":3,"sources":["ovpApp/components/growl/growl.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,CAAC,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEjiB,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AAJhH,CAAC,YAAM;IACH;IACA,QAAQ,OAAO,kCAAkC,CAC7C,2BACA,kBAEH,UAAU,gBAAgB;QACvB,aAAa;QACb,YAAU,CAAA,YAAA;;;;YAEK,SAFG,uBAEF,QAAQ,gBAAgB,UAAU,IAAI,QAAQ,WAAW,UAAU;gBAI3E,gBAAgB,MANN;;gBAGV,QAAQ,OAAO,MAAM;oBACjB,QAAA;oBACA,gBAAA;oBACA,UAAA;oBACA,IAAA;oBACA,QAAA;oBACA,WAAA;oBACA,UAAA;;;;YASR,aAnBc,wBAAsB,CAAA;gBAoBhC,KAAK;gBACL,OAPG,SAAA,UAAG;oBAQF,IAAI,QAAQ;;oBAPhB,KAAK,UAAU;oBACf,KAAK,eAAe,KAAK;;oBAEzB,KAAK,OAAO,IAAI,iBAAiB,UAAC,OAAO,SAAS,oBAAuB;wBACrE,IAAI,SAAS,QAAQ,UAAU,sBAAsB,qBACnD,MAAK,OAAO;wBACd,MAAK;wBACL,MAAK,WAAW,MAAK,GAAG;wBACxB,MAAK,aAAa,WAAW,MAAK,SAAS;wBAC3C,MAAK,UAAU;wBACf,MAAK,oBAAoB,MAAK,iBAAiB,KAAI;wBACnD,MAAK,UAAU,GAAG,WAAW,MAAK;wBAClC,MAAK,UAAU,GAAG,SAAS,MAAK;wBAChC,MAAK,wBAAwB,MAAK,UAAU,GAAG;wBAC/C,IAAI,QAAQ,MAAK,SAAS;wBAC1B,IAAI,QAAQ,GAAG;;4BAEX,MAAK,SAAS,IAAI,gBAAgB,EAAE,QAAQ;;;;wBAIhD,MAAK,SAAS,YAAM;4BAChB,MAAK,UAAU,KAAK,gCAAgC;2BACrD;;wBAEH,MAAK,QAAQ,MAAK,SAAS,YAAM;4BAC7B,MAAK,SAAS;4BACd,MAAK,WAAW;4BAChB,MAAK;2BACN;;;oBAGP,KAAK,OAAO,YAAY;;wBAEpB,KAAK;;;eAWV;gBACC,KAAK;gBACL,OATY,SAAA,iBAAC,KAAK;;;oBAGlB,IAAI,CAAC,KAAK,SAAS,EAAE,IAAI,UAAU,QAAQ,WAAW,IAAI,OAAO,UAAU,UAAU;wBACjF;;;;oBAIJ,IAAI,EAAE,IAAI,YAAY,MAAM,IAAI,YAAY,OACxC,EAAE,IAAI,YAAY,aAAc,QAAQ,QAAQ,IAAI,QAAQ,QAAQ,UAAU,WAAW,IAAK;wBAC9F,KAAK,UAAU,KAAK,gCAAgC;wBACpD,IAAI;wBACJ,OAAO;;;eAWZ;gBACC,KAAK;gBACL,OATC,SAAA,QAAG;oBACJ,KAAK,UAAU,IAAI,WAAW,KAAK;oBACnC,KAAK,UAAU,IAAI,SAAS,KAAK;;oBAEjC,KAAK,UAAU;;oBAEf,IAAI,KAAK,OAAO;wBACZ,KAAK,SAAS,OAAO,KAAK;wBAC1B,KAAK,QAAQ;;;oBAGjB,IAAI,KAAK,UAAU;wBACf,KAAK,SAAS;wBACd,KAAK,WAAW;;;oBAGpB,IAAI,KAAK,uBAAuB;wBAC5B,QAAQ,QAAQ,KAAK,uBAAuB;;;;;YAcpD,OApGc;;;KA2FrB","file":"ovpApp/components/growl/growl.js","sourcesContent":["(() => {\n    'use strict';\n    angular.module('ovpApp.components.growlTracker', [\n        'ajoslin.promise-tracker',\n        'ovpApp.config'\n    ])\n    .component('growlTracker', {\n        templateUrl: '/js/ovpApp/components/growl/growl.html',\n        controller: class GrowlTrackerController {\n            /* @ngInject */\n            constructor($scope, promiseTracker, $timeout, $q, config, $document, $element) {\n                angular.extend(this, {\n                    $scope,\n                    promiseTracker,\n                    $timeout,\n                    $q,\n                    config,\n                    $document,\n                    $element\n                });\n            }\n\n            $onInit() {\n                this.message = undefined;\n                this.growlTracker = this.promiseTracker();\n\n                this.$scope.$on('message:growl', (event, message, millisecondsLength) => {\n                    var length = angular.isDefined(millisecondsLength) ? millisecondsLength\n                    : this.config.confirmMessageDelayMs;\n                    this.clean();\n                    this.deferred = this.$q.defer();\n                    this.growlTracker.addPromise(this.deferred.promise);\n                    this.message = message;\n                    this.boundEventHandler = this.growlHandleEvent.bind(this);\n                    this.$document.on('keydown', this.boundEventHandler);\n                    this.$document.on('click', this.boundEventHandler);\n                    this.previousActiveElement = this.$document[0].activeElement;\n                    var width = this.$element.width();\n                    if (width > 0) {\n                        //element is fixed at 50% right, so set negative margin\n                        this.$element.css('margin-right', -(width / 2));\n                    }\n\n                    //wait until after this is displayed to set the focus\n                    this.$timeout(() => {\n                        this.$document.find('#growlpopup .popupCloseClick').focus();\n                    }, 50);\n\n                    this.timer = this.$timeout(() => {\n                        this.deferred.resolve();\n                        this.deferred = undefined;\n                        this.clean();\n                    }, length);\n                });\n\n                this.hide = function () {\n                    // Cleaning will cause the template to hide\n                    this.clean();\n                };\n            }\n\n            growlHandleEvent(evt) {\n                // Do not register click for HTML elements that do not have classNames as String.\n                // E.g; svg icons.\n                if (!this.timer || !(evt.target && angular.isFunction(evt.target.className.search))) {\n                    return;\n                }\n\n                //Not an escape key or enter or a click on the message, just keep the focus\n                if (!(evt.keyCode === 27 || evt.keyCode === 13) &&\n                    !(evt.keyCode === undefined && (angular.element(evt.target).parents('#popup').length === 0))) {\n                    this.$document.find('#growlpopup .popupCloseClick').focus();\n                    evt.preventDefault();\n                    return true;\n                }\n            }\n\n            clean() {\n                this.$document.off('keydown', this.boundEventHandler);\n                this.$document.off('click', this.boundEventHandler);\n\n                this.message = undefined;\n\n                if (this.timer) {\n                    this.$timeout.cancel(this.timer);\n                    this.timer = undefined;\n                }\n\n                if (this.deferred) {\n                    this.deferred.reject();\n                    this.deferred = undefined;\n                }\n\n                if (this.previousActiveElement) {\n                    angular.element(this.previousActiveElement).focus();\n                }\n            }\n        }\n    });\n})();\n"],"sourceRoot":"/source/"}