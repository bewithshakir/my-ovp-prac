{"version":3,"sources":["ovpApp/product/info/product-related.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,CAAC,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEjiB,SAAS,mBAAmB,KAAK,EAAE,IAAI,MAAM,QAAQ,MAAM,EAAE,KAAK,IAAI,IAAI,GAAG,OAAO,MAAM,IAAI,SAAS,IAAI,IAAI,QAAQ,KAAK,KAAK,KAAK,IAAI,IAAI,OAAO,aAAa,EAAE,OAAO,MAAM,KAAK;;AAEtL,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AANhH,CAAC,YAAY;IACT;;IAEA,QAAQ,OAAO,0BAA0B,IAGxC,UAAU,kBAAkB;QACzB,UAAU;YACN,OAAO;;QAEX,aAAa;;oHACb,YAAU,CAAA,YAAA;YACK,SADG,eACF,qBAAqB,QAAQ,iBAAiB,eAAe;gBAMrE,gBAAgB,MAPN;;gBAEV,QAAQ,OAAO,MAAM,EAAC,qBAAA,qBAAqB,QAAA,QAAQ,iBAAA,iBAAiB,eAAA;;;YAUxE,aAZc,gBAAc,CAAA;gBAaxB,KAAK;gBACL,OATM,SAAA,WAAC,SAAS;oBAUZ,IAAI,QAAQ;;oBAThB,IAAI,QAAQ,OAAO;wBACf,KAAK;wBACL,KAAK,wBAAwB;4BACzB,OAAO,gBAAgB,KAAK,MAAM;4BAClC,WAAW;4BACX,iBAAiB;4BACjB,cAAc,KAAK,oBAAoB;4BACvC,YAAY;gCACR,cAAc;gCACd,gBAAgB;gCAChB,eAAe,SAAA,cAAC,MAAM,OAAU;oCAC5B,IAAI,QAAQ,KAAK;oCACjB,IAAI,OAAO;wCAYH,IAAI;;wCAXR,MAAK,oBAAoB,SAAS;wCAClC,CAAA,UAAA,MAAK,QAAO,GAAE,MAAA,SAAA,mBAAI;;;;;;;eAoBvC;gBACC,KAAK;gBACL,OAdW,SAAA,kBAAG;oBAeV,IAAI,SAAS;;oBAdjB,KAAK,UAAU;oBACf,IAAI,SAAM;oBACV,IAAI,KAAK,MAAM,UAAU;wBACrB,SAAS,KAAK,cAAc,wBAAwB,KAAK,MAAM;2BAC5D;wBACH,SAAS,KAAK,cAAc,yBAAyB,KAAK,MAAM,cAAc;;oBAElF,OACK,MAAM,GACN,IAAI,UAAA,MAAI;wBAeL,OAfS,KAAK,QAAQ,IAAI,OAAK,gBAAgB;uBAClD,UAAU,UAAA,SAAO;wBAgBd,OAhBkB,OAAK,UAAU;;;;;YAqB7C,OA5Dc;;;KA2CrB","file":"ovpApp/product/info/product-related.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular.module('ovpApp.product.related', [\n\n    ])\n    .component('productRelated', {\n        bindings: {\n            asset: '<'\n        },\n        templateUrl: '/js/ovpApp/product/info/product-related.html',\n        controller: class ProductRelated {\n            constructor(productFocusRestore, $state, delegateFactory, searchService) {\n                angular.extend(this, {productFocusRestore, $state, delegateFactory, searchService});\n            }\n\n            $onChanges(changes) {\n                if (changes.asset) {\n                    this.getRelatedShows();\n                    this.relatedCarouselConfig = {\n                        title: 'Related to ' + this.asset.title,\n                        showTitle: false,\n                        showReturnArrow: false,\n                        initialFocus: this.productFocusRestore.getIndex(),\n                        itemConfig: {\n                            enableRemove: false,\n                            showRentalInfo: 'auto',\n                            clickCallback: (item, index) => {\n                                let route = item.clickRoute;\n                                if (route) {\n                                    this.productFocusRestore.setIndex(index);\n                                    this.$state.go(...route);\n                                }\n                            }\n                        }\n                    };\n                }\n            }\n\n            getRelatedShows() {\n                this.related = [];\n                let source;\n                if (this.asset.isSeries) {\n                    source = this.searchService.getRelatedByTmsSeriesId(this.asset.tmsSeriesId);\n                } else {\n                    source = this.searchService.getRelatedByTmsProgramId(this.asset.tmsProgramIds[0]);\n                }\n                source\n                    .retry(3)\n                    .map(data => data.results.map(this.delegateFactory.createInstance))\n                    .subscribe(related => this.related = related);\n            }\n        }\n    });\n})();\n"],"sourceRoot":"/source/"}