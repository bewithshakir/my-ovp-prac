{"version":3,"sources":["ovpApp/settings/stb-parentalControls/stb-timeblock/stb-timeBlock.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,CAAC,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEjiB,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AAJhH,CAAC,YAAM;IACH;;IAEA,QAAQ,OAAO,kDAAkD,CAC7D,sCACA,8BACA,2BACA,8BACA,yDACA,0DAEH,UAAU,gBAAgB;QACvB,aAAa;QACb,UAAU;YACN,OAAO;;QAEX,YAAU,CAAA,YAAA;;;;YAEK,SAFG,aAEF,oBAAoB,YAAY,OAAO,OAAO,UAAU,QAAQ,mBAAmB;gBAA3F,gBAAgB,MAFN;;gBAGV,QAAQ,OAAO,MAAM,EAAC,oBAAA,oBAAoB,YAAA,YAAY,OAAA,OAAO,OAAA,OAAO,UAAA,UAAU,QAAA;oBAC1E,mBAAA;;;YAIR,aARc,cAAY,CAAA;gBAStB,KAAK;gBACL,OAHG,SAAA,UAAG;oBAIF,IAAI,QAAQ;;oBAHhB,IAAI,CAAC,KAAK,OAAO,4BAA4B,kBAAkB;wBAC3D;;;oBAGJ,KAAK,aAAa;oBAClB,KAAK,mBAAmB,gBAAgB,KAAK,UAAA,QAAU;wBACnD,MAAK,aAAa;;;eAQvB;gBACC,KAAK;gBACL,OANW,SAAA,kBAAG;oBAOV,IAAI,SAAS;;oBANjB,IAAI,KAAK,WAAW,SAAS,GAAG;wBAC5B,KAAK,MAAM,KAAK,KAAK,kBAAkB,gBAAgB;2BACpD;wBACH,KAAK,MAAM,KAAK;4BACZ,WAAW;2BACZ,OAAO,KAAK,UAAA,QAAU;;;4BAGrB,OAAK,aAAa,QAAQ,KAAK;4BAC/B,OAAK,SAAS;2BACf,UAAA,KAAO;4BACN,IAAI,IAAI,WAAW,IAAI,OAAO;gCAC1B,OAAK,MAAM,KAAK;oCACZ,OAAO,IAAI;oCACX,SAAS,IAAI;oCACb,YAAY;;;;;;eAc7B;gBACC,KAAK;gBACL,OATW,SAAA,kBAAG;oBAUV,IAAI,SAAS;;oBATjB,IAAI,KAAK,WAAW,SAAS,GAAG;wBAC5B,KAAK,MAAM,KAAK,KAAK,kBAAkB,gBAAgB;2BACpD;wBACH,KAAK,MAAM,KAAK;4BACZ,WAAW;2BACZ,OAAO,KAAK,UAAA,QAAU;4BACrB,OAAK,aAAa;4BAClB,OAAK,SAAS;;;;;;YAiB1B,OAlEc;;;KAuDrB","file":"ovpApp/settings/stb-parentalControls/stb-timeblock/stb-timeBlock.js","sourcesContent":["(() => {\n    'use strict';\n\n    angular.module('ovpApp.settings.stb.parentalControls.timeBlock', [\n        'ovpApp.services.stbSettingsService',\n        'ovpApp.services.errorCodes',\n        'ovpApp.directives.focus',\n        'ovpApp.directives.arrowNav',\n        'ovpApp.settings.stb.parentalControls.timeBlock.create',\n        'ovpApp.settings.stb.parentalControls.timeBlock.delete'\n    ])\n    .component('stbTimeBlock', {\n        templateUrl: '/js/ovpApp/settings/stb-parentalControls/stb-timeblock/stb-timeBlock.html',\n        bindings: {\n            'stb': '<'\n        },\n        controller: class StbTimeBlock {\n            /* @ngInject */\n            constructor(StbSettingsService, dateFormat, modal, alert, messages, config, errorCodesService) {\n                angular.extend(this, {StbSettingsService, dateFormat, modal, alert, messages, config,\n                    errorCodesService});\n            }\n\n            $onInit() {\n                if (!this.config.stbSettingsParentalControls.timeBlockEnabled) {\n                    return;\n                }\n\n                this.timeBlocks = [];\n                this.StbSettingsService.getTimeBlocks().then(blocks => {\n                    this.timeBlocks = blocks;\n                });\n            }\n\n            createTimeBlock() {\n                if (this.timeBlocks.length > 7) {\n                    this.alert.open(this.errorCodesService.getAlertForCode('WCM-1026'));\n                } else {\n                    this.modal.open({\n                        component: 'stbCreateTimeBlock'\n                    }).result.then(result => {\n                        // We need to modify timeBlocks reference,\n                        // so that a model change is detected.\n                        this.timeBlocks = angular.copy(result);\n                        this.srText = 'time block created';\n                    }, err => {\n                        if (err.message && err.title) {\n                            this.alert.open({\n                                title: err.title,\n                                message: err.message,\n                                buttonText: 'OK'\n                            });\n                        }\n                    });\n                }\n            }\n\n            deleteTimeBlock() {\n                if (this.timeBlocks.length < 1) {\n                    this.alert.open(this.errorCodesService.getAlertForCode('WCM-1025'));\n                } else {\n                    this.modal.open({\n                        component: 'stbDeleteTimeBlock'\n                    }).result.then(result => {\n                        this.timeBlocks = result;\n                        this.srText = 'time block deleted';\n                    });\n                }\n            }\n        }\n    });\n})();\n"],"sourceRoot":"/source/"}