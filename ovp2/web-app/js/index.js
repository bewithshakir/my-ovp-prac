/* globals window */
require(['build'], function (requireConfig) {
    'use strict';

    require.config(requireConfig);

    require([
            'libs/browser-polyfill.min',
            'libs/plugins/jquery.badbrowser',
            'libs/platform',
            '$',
            'libs/delegate/dataDelegate',
            'selectn',
            'version',
            'libs/ovp-video-player/TWCVideoJS',
            'sha1',
            'angular',
            'stickyStates',
            'splunk',
            'ovpApp/config/ovp-config-class',
            'ovpApp/config/config-defaults',
            'analytics'],
        function (polyfill,
            badBrowser,
            platform,
            $,
            DataDelegate,
            selectn,
            version,
            TWCVideoJS,
            sha1,
            angular,
            stickyStates,
            splunk) {
            if (!badBrowser.check()) {
                require([
                    'libs/js-md5',
                    'jquery-ui',
                    'libs/plugins/jquery.placeholder',
                    'rx-angular',
                    'moment',
                    'angular-moment',
                    'vpns',
                    'libs/dirPagination',
                    'libs/angular-libs/promise-tracker',
                    'libs/angular/1.5.8/angular-resource',
                    'libs/angular/1.5.8/angular-sanitize',
                    'libs/angular/1.5.8/angular-cookies',
                    // TODO - This is only needed if development is true
                    // 'ovpApp/rdvr/rdvr-mock-dataService',
                    'libs/angular-libs/ui-bootstrap-2.5.0.min',
                    'libs/angular-libs/angular.audio',
                    'libs/angular-libs/angular-vs-repeat.min',
                    //bower_components
                    'libs/angular-aria',
                    'libs/angular-messages',
                    'libs/hotkeys',
                    'libs/angular-ellipsis.min',
                    'ovpApp/ovpAppTemplates',
                    'ovpApp/login/login-service',
                    'ovpApp/login/login',
                    'ovpApp/feature-tour/feature-tour',
                    'ovpApp/feature-tour/feature-tour-slide',
                    'ovpApp/cache/cache',
                    'ovpApp/interceptors/oauthInterceptor',
                    'ovpApp/interceptors/nnsParamsInterceptor',
                    'ovpApp/interceptors/splunkInterceptor',
                    'ovpApp/interceptors/httpInterceptor',
                    'ovpApp/interceptors/jquery-ajax-interceptor',
                    'ovpApp/components/environment-dropdown/environment-dropdown',
                    'ovpApp/services/run-once-service',
                    'ovpApp/buyFlow/base-offer',
                    'ovpApp/buyFlow/bundle-checkbox',
                    'ovpApp/buyFlow/buyFlow',
                    'ovpApp/buyFlow/buyFlow-ui-router',
                    'ovpApp/buyFlow/buyFlow-service',
                    'ovpApp/buyFlow/collapsed-step',
                    'ovpApp/buyFlow/extras-and-premiums',
                    'ovpApp/buyFlow/network-checkbox',
                    'ovpApp/buyFlow/review',
                    'ovpApp/buyFlow/confirmation',
                    'ovpApp/buyFlow/welcome',
                    'ovpApp/cache/cache',
                    // 'ovpApp/accessibility/directives',
                    'ovpApp/components/bulk-row-map',
                    'ovpApp/components/channel-card/channel-card',
                    'ovpApp/components/confirm/confirm',
                    'ovpApp/components/customer-info/customer-info-service',
                    'ovpApp/components/error/ServiceError',
                    'ovpApp/components/error/sad-tv-error',
                    'ovpApp/components/footer/site-footer',
                    'ovpApp/components/fancy-ratings/fancy-ratings',
                    'ovpApp/components/growl/growl',
                    'ovpApp/components/header/site-header',
                    'ovpApp/components/header/main-menu',
                    'ovpApp/components/header/off-canvas-menu',
                    'ovpApp/components/header/header-toggler',
                    'ovpApp/components/header/menu-data',
                    'ovpApp/components/header/menu-item',
                    'ovpApp/components/header/ooh/ooh',
                    'ovpApp/components/header/tools/base-dropdown-controller',
                    'ovpApp/components/header/tools/settings-menu',
                    'ovpApp/components/loading-tracker/loading-tracker',
                    'ovpApp/components/channel-identifier/channel-identifier',
                    'ovpApp/components/mobile-login/mobile-login',
                    'ovpApp/components/mobile-nav/mobile-nav',
                    'ovpApp/components/ovp/ovp-button/ovp-button',
                    'ovpApp/components/ovp/ovp-cc-settings/ovp-cc-settings',
                    'ovpApp/components/ovp/ovp-cc-settings/ovp-remote-player-cc-settings',
                    'ovpApp/components/ovp/ovp-channel/ovp-channel',
                    'ovpApp/components/ovp/ovp-check-box/ovp-check-box',
                    'ovpApp/components/ovp/ovp-click-confirm/ovp-click-confirm',
                    'ovpApp/components/ovp/ovp-error/ovp-error',
                    'ovpApp/components/ovp/ovp-person/ovp-person',
                    'ovpApp/components/ovp/ovp-product/ovp-product',
                    'ovpApp/components/ovp/ovp-rating/ovp-rating',
                    'ovpApp/components/ovp/ovp-select-box/ovp-select-box',
                    'ovpApp/components/ovp/ovp-sortable/ovp-sortable',
                    'ovpApp/components/ovp/ovp-tooltip/ovp-tooltip',
                    'ovpApp/components/ovp/ovp-switch/ovp-switch',
                    'ovpApp/components/ovp/ovp-parental-controls-slider/ovp-parental-controls-slider',
                    'ovpApp/components/pin-entry/pin-entry',
                    'ovpApp/components/player/blocking-screen',
                    'ovpApp/components/player/flash-availability-service',
                    'ovpApp/components/player/flash-warning',
                    'ovpApp/components/player/mini-guide',
                    'ovpApp/components/player/mini-guide-data',
                    'ovpApp/components/player/player',
                    'ovpApp/components/player/remote-player',
                    'ovpApp/components/player/sap-service',
                    'ovpApp/components/player/player-stream-service',
                    'ovpApp/components/player/whats-on',
                    'ovpApp/components/player/whats-on-data-delegate',
                    'ovpApp/components/player/skip-button',
                    'ovpApp/components/player/playerControls',
                    'ovpApp/components/player/remote-player-controls',
                    'ovpApp/components/player/set-top-connection',
                    'ovpApp/components/player/ovp-scrubber',
                    'ovpApp/components/stb-picker/stb-picker',
                    'ovpApp/components/alert/alert',
                    'ovpApp/components/popup/popup',
                    'ovpApp/components/modal/modal',
                    'ovpApp/components/modal-kite/modal-kite',
                    'ovpApp/components/edit-conflict/edit-conflict',
                    'ovpApp/components/edit-conflict/conflict-item',
                    'ovpApp/components/template-popup/edit-scheduled/edit-scheduled',
                    'ovpApp/components/record-cdvr-series/record-cdvr-series',
                    'ovpApp/components/template-popup/auth/auth-form',
                    'ovpApp/components/template-popup/template-popup',
                    'ovpApp/components/vast/vastParser',
                    'ovpApp/components/smooth-focus/smooth-focus-directive',
                    'ovpApp/components/util/httpUtil',
                    'ovpApp/components/util/DateUtil',
                    'ovpApp/components/insecure/insecureService',
                    'ovpApp/config/messages-defaults',
                    'ovpApp/config/config',
                    'ovpApp/components/connectivity-alert/connectivity-alert',
                    'ovpApp/components/specu/campus-wifi-error',
                    'ovpApp/components/specu/signout',
                    'ovpApp/components/specu/support-info',
                    'ovpApp/directives/svg-path',
                    'ovpApp/data-delegates/delegate-factory',
                    'ovpApp/directives/affix',
                    'ovpApp/directives/arrow-nav',
                    'ovpApp/directives/fadein-immediate',
                    'ovpApp/directives/fadein-onload',
                    'ovpApp/directives/fallback-image',
                    'ovpApp/directives/ovp-carousel',
                    'ovpApp/directives/ovp-dropdown',
                    'ovpApp/directives/ovp-dropdown-list',
                    'ovpApp/directives/ovp-focus',
                    'ovpApp/directives/ovp-keydown',
                    'ovpApp/directives/grid-list-toggler',
                    'ovpApp/directives/grid-list-toggler-service',
                    'ovpApp/directives/lazy-src',
                    'ovpApp/directives/ovp-grid-list',
                    'ovpApp/directives/quiet-loading-tracker',
                    'ovpApp/directives/trap-focus',
                    'ovpApp/directives/ovp-fullscreen',
                    'ovpApp/directives/draggable',
                    'ovpApp/eas/eas',
                    'ovpApp/guide/guide',
                    'ovpApp/adBlockerDetection/adBlockerDetection',
                    'ovpApp/analytics/analytics',
                    'ovpApp/analytics/events/login',
                    'ovpApp/analytics/events/error',
                    'ovpApp/analytics/events/playback',
                    'ovpApp/analytics/events/apiCall',
                    'ovpApp/analytics/events/navigation',
                    'ovpApp/analytics/events/navigationTimer',
                    'ovpApp/analytics/events/search',
                    'ovpApp/analytics/events/productActionAnalytics',
                    'ovpApp/analytics/events/sessionAnalytics',
                    'ovpApp/analytics/events/windowAnalytics',
                    'ovpApp/analytics/events/dvr',
                    'ovpApp/analytics/analytics-service',
                    'ovpApp/analytics/analytics-state',
                    'ovpApp/analytics/analytics-enums',
                    'ovpApp/analytics/analytics-assetHelper',
                    'ovpApp/services/vpns-service',
                    'ovpApp/directives/scroll-reset',
                    'ovpApp/directives/scroll-cache',
                    'ovpApp/filters/title-case',
                    'ovpApp/filters/to-trusted',
                    'ovpApp/liveTv/liveTv',
                    'ovpApp/liveTv/liveTv-ui-router',
                    'ovpApp/ondemand/category/ondemand-category',
                    'ovpApp/ondemand/gallery-summary-page/gallery-summary-page',
                    'ovpApp/ondemand/networks/network-category-list',
                    'ovpApp/ondemand/networks/network-main-page',
                    'ovpApp/ondemand/networks/network-sub-page',
                    'ovpApp/ondemand/networks/network-3-tier',
                    'ovpApp/ondemand/ondemand-goback',
                    'ovpApp/ondemand/ondemand-ui-router',
                    'ovpApp/ondemand/ondemand-data',
                    'ovpApp/ondemand/subheader/ondemand-subheader',
                    'ovpApp/ondemand/subheader/ondemand-subheader-service',
                    'ovpApp/oauth/oauth',
                    'ovpApp/ovpAppTemplates',
                    'ovpApp/cdvr/cdvr',
                    'ovpApp/rdvr/disk-usage/disk-usage',
                    'ovpApp/rdvr/priority/priority',
                    'ovpApp/rdvr/my-recordings/my-recordings',
                    'ovpApp/rdvr/recordings-cache',
                    'ovpApp/rdvr/rdvr-ui-router',
                    'ovpApp/rdvr/rdvr',
                    'ovpApp/rdvr/rdvr-cache-service',
                    'ovpApp/rdvr/rdvr-mock-dataService',
                    'ovpApp/rdvr/rdvr-service',
                    'ovpApp/rdvr/rdvr-state-service',
                    'ovpApp/rdvr/scheduled/scheduled',
                    'ovpApp/rdvr/scheduled/scheduled-item',
                    'ovpApp/rdvr/abstract-datasource',
                    'ovpApp/product/actions/action-menu',
                    'ovpApp/product/actions/product-action-service',
                    'ovpApp/product/actions/product-button',
                    'ovpApp/product/episode-list/product-episode-list',
                    'ovpApp/product/info/product-cast',
                    'ovpApp/product/info/product-details',
                    'ovpApp/product/info/product-info',
                    'ovpApp/product/info/product-related',
                    'ovpApp/product/other-ways/other-ways',
                    'ovpApp/product/rental/product-rental',
                    'ovpApp/product/rental/product-rental-service',
                    'ovpApp/product/product',
                    'ovpApp/product/product-focus-restore',
                    'ovpApp/product/product-ui-router',
                    'ovpApp/product/product-movie',
                    'ovpApp/product/product-series',
                    'ovpApp/product/product-service',
                    'ovpApp/parental-controls-dialog/parental-controls-dialog',
                    'ovpApp/purchase-pin-dialog/purchase-pin-dialog',
                    'ovpApp/search/result-pages/search-error',
                    'ovpApp/search/result-pages/person-search-results',
                    'ovpApp/search/result-pages/quick-search-results',
                    'ovpApp/search/result-pages/recent-searches',
                    'ovpApp/search/result-pages/search-results',
                    'ovpApp/search/result-pages/sports-search-results',
                    'ovpApp/search/search-service',
                    'ovpApp/search/search-header',
                    'ovpApp/search/search-input',
                    'ovpApp/search/search-ui-router',
                    'ovpApp/search/widgets/result-list-item',
                    'ovpApp/search/widgets/sports-result-list-item',
                    'ovpApp/services/accessibility',
                    'ovpApp/services/capabilities-service',
                    'ovpApp/services/profile-service',
                    'ovpApp/services/cdvr-service',
                    'ovpApp/services/channel-service',
                    'ovpApp/services/connectivity-service',
                    'ovpApp/services/date-format',
                    'ovpApp/services/device-id-service',
                    'ovpApp/services/entry-service',
                    'ovpApp/services/entitlements-service',
                    'ovpApp/services/epgs-service',
                    'ovpApp/services/favorites-service',
                    'ovpApp/services/focus-mediator',
                    'ovpApp/services/home-page',
                    'ovpApp/services/parentalControls-service',
                    'ovpApp/services/purchasePin-service',
                    'ovpApp/services/nns-service',
                    'ovpApp/services/lineup-service',
                    'ovpApp/services/location-service',
                    'ovpApp/services/ovp-storage',
                    'ovpApp/services/ovp-src-service',
                    'ovpApp/services/flick-to-service',
                    'ovpApp/services/bookmark-service',
                    'ovpApp/services/rx-utils',
                    'ovpApp/services/stb-service',
                    'ovpApp/services/error-codes',
                    'ovpApp/config/error-codes/error-codes-defaults',
                    'ovpApp/config/error-codes/error-codes-overrides',
                    'ovpApp/services/stb-parental-pin-factory',
                    'ovpApp/services/template-request',
                    'ovpApp/services/store-service',
                    'ovpApp/services/splunk-service',
                    'ovpApp/services/player-splunk-service',
                    'ovpApp/services/drmSession-service',
                    'ovpApp/services/version-service',
                    'ovpApp/services/streamplus-service',
                    'ovpApp/services/string-utils-service',
                    'ovpApp/services/stb-settings-service',
                    'ovpApp/services/stb-purchase-pin-factory',
                    'ovpApp/services/window-focus',
                    'ovpApp/settings/devices/devices',
                    'ovpApp/settings/favorites/favorites',
                    'ovpApp/settings/favorites/favorite-card',
                    'ovpApp/settings/parentalControls/parentalControls',
                    'ovpApp/settings/parentalControls/parental-controls-data',
                    'ovpApp/settings/stb-parentalControls/stb-parentalControlsToggle',
                    'ovpApp/settings/stb-parentalControls/stb-parentalControls',
                    'ovpApp/settings/stb-parentalControls/stb-titleBlock',
                    'ovpApp/settings/stb-parentalControls/stb-shareInProgressList',
                    'ovpApp/settings/stb-parentalControls/stb-allowedRatings',
                    'ovpApp/settings/stb-parentalControls/stb-contentBlock',
                    'ovpApp/settings/parentalControls/channelBlock/channelBlock',
                    'ovpApp/settings/stb-parentalControls/stb-changeBlockingPin',
                    'ovpApp/settings/stb-parentalControls/stb-timeblock/stb-timeBlock',
                    'ovpApp/settings/stb-parentalControls/stb-timeblock/stb-createTimeBlock',
                    'ovpApp/settings/stb-parentalControls/stb-timeblock/stb-deleteTimeBlock',
                    'ovpApp/settings/stb-parentalControls/stb-receiverUnavailable',
                    'ovpApp/settings/purchasePin/purchasePin',
                    'ovpApp/settings/accessibility/accessibility',
                    'ovpApp/settings/settings',
                    'ovpApp/settings/settings-ui-router',
                    'ovpApp/settings/settings-state-service',
                    'ovpApp/settings/stb-purchasePin/stb-purchasePin',
                    'ovpApp/specu-welcome/specu-welcome',
                    'ovpApp/store/store-page',
                    'ovpApp/twctv/twctv-ui-router',
                    'ovpApp/watch-later/watch-later',
                    'ovpApp/watch-later/watch-later-data',
                    'ovpApp/watch-later/watch-later-ui-router'
                ], function () {
                    require([
                        // Delay loading of these so that the module
                        //  will already exit
                        'ovpApp/data-delegates/componentsearch',
                        'ovpApp/data-delegates/category-list',
                        'ovpApp/data-delegates/delegate-utils',
                        'ovpApp/data-delegates/episode-list',
                        'ovpApp/data-delegates/event',
                        'ovpApp/data-delegates/media-list',
                        'ovpApp/data-delegates/network-list',
                        'ovpApp/data-delegates/person',
                        'ovpApp/data-delegates/pods-with-assets',
                        'ovpApp/data-delegates/product',
                        'ovpApp/data-delegates/recording',
                        'ovpApp/data-delegates/results',
                        'ovpApp/data-delegates/searchgroup',
                        'ovpApp/data-delegates/series',
                        'ovpApp/data-delegates/stream',
                        'ovpApp/guide/guide-controller',
                        'ovpApp/guide/guide-service',
                        'ovpApp/guide/guide-time-container-directive',
                        'ovpApp/guide/guide-subheader-controller',
                        'ovpApp/guide/guide-date-directive',
                        'ovpApp/guide/guide-scroll-container-directive',
                        'ovpApp/guide/guide-channel-row-directive',
                        'ovpApp/product/actions/product-action-map',
                        'ovpApp/product/episode-list/product-episode',
                        'ovpApp/components/player/toggle-cc-settings',
                        'ovpApp/components/player/info-panel',
                        'ovpApp/components/player/toggle-cc',
                        'ovpApp/components/player/toggle-fullscreen',
                        'ovpApp/components/player/toggle-play',
                        'ovpApp/components/player/toggle-sap',
                        'ovpApp/components/player/toggle-watch-on-tv',
                        'ovpApp/components/player/volume-control',
                        'ovpApp/config/config-service',
                        'ovpApp/config/oauth-config',
                        'ovpApp/config/messages-service',
                        'ovpApp/config/error-codes/error-codes-directive',
                        'ovpApp/components/player/toggle-debug',
                        'ovpApp/components/pin-entry/pin-validate',
                        'ovpApp/components/pin-entry/pin-reset',
                        'ovpApp/components/pin-entry/pin-entry-message',
                        'ovpApp/cdvr/cdvr-ui-router',
                        'ovpApp/cdvr/cdvr-scheduled',
                        'ovpApp/cdvr/cdvr-recorded',
                        'ovpApp/cdvr/cdvr-subheader',
                        'ovpApp/cdvr/cdvr-list-item',
                        'ovpApp/cdvr/cdvr-schedule-list-item',
                        'ovpApp/oauth/oauth-service',
                        'ovpApp/oauth/oauth-signer',
                        'ovpApp/oauth/oauth-data-manager',
                        'ovpApp/rdvr/disk-usage-datasource',
                        'ovpApp/rdvr/scheduled-recordings-datasource',
                        'ovpApp/rdvr/series-priority-datasource',
                        'ovpApp/rdvr/my-recordings-datasource',
                        'ovpApp/rdvr/my-recordings/recording-item',
                        'ovpApp/rdvr/rdvr-toolbar/rdvr-toolbar',
                        'ovpApp/rdvr/rdvr-toolbar/rename-stb',
                        'libs/swfobject/src/swfobject'
                    ], function () {
                        angular.module('ovpApp', [
                            'ovpApp.adBlockerDetection',
                            'ovpApp.ovpAppTemplates',
                            'ovpApp.login.loginService',
                            'ovpApp.login',
                            'ovpApp.featureTour',
                            'ovpApp.components.ovpFooter',
                            'ovpApp.cache',
                            'ovpApp.services.runOnceService',
                            'ovpApp.ovpAppTemplates',
                            'ovpApp.components.loadingTracker',
                            'ovpApp.components.header',
                            'ovpApp.components.alert',
                            'ovpApp.components.popup',
                            'ovpApp.components.mobile.login',
                            'ovpApp.components.mobileNav',
                            'ovpApp.components.channelIdentifier',
                            'ovpApp.twctv.router',
                            'ovpApp.components.growlTracker',
                            'ovpApp.live',
                            'ovpApp.ondemand',
                            'ovpApp.product',
                            'ovpApp.rdvr',
                            'ovpApp.search',
                            'ovpApp.settings',
                            'ovpApp.settings.devices',
                            'ovpApp.buyFlow',
                            'ovpApp.rdvr.rdvrService',
                            'ovpApp.services.splunk',
                            'ovpApp.analytics',
                            'ovpApp.service.version',
                            'ovpApp.services.errorCodes',
                            'ovpApp.watchlater',
                            'ovpApp.cache',
                            'ovpApp.interceptors.oauth',
                            'ovpApp.interceptors.httpInterceptor',
                            'ovpApp.interceptors.nns',
                            'ovpApp.interceptors.splunk',
                            'ovpApp.services.drmSessionService',
                            'ovpApp.guide',
                            'ovpApp.services.locationService',
                            'ovpApp.cdvr',
                            'ovpApp.directives.smooth-focus',
                            'ovpApp.interceptors.jquery',
                            'ovpApp.services.connectivityService',
                            'ui.router'
                        ])
                        /* @ngInject */
                        .config(function (paginationTemplateProvider, $uiRouterProvider) {
                            paginationTemplateProvider
                                .setPath('/js/ovpApp/directives/pagination-template.html');
                            $uiRouterProvider.plugin(stickyStates.StickyStatesPlugin);
                            const visualizer = window['ui-router-visualizer'];
                            if (visualizer) {
                                $uiRouterProvider.plugin(visualizer.Visualizer);
                            }
                        });


                        angular.module('ovpApp.version', []).constant('version', version);
                        //Platform is used for browser detection
                        angular.module('lib.platform', []).constant('platform', platform);
                        angular.module('lib.sha1', []).constant('sha1', sha1);
                        angular.module('dataDelegate', []).constant('DataDelegate', DataDelegate);
                        angular.module('selectn', []).constant('selectn', selectn);
                        angular.module('ovpApp.hnav.vpns', []).constant('VpnsClient', require('vpns'));
                        angular.module('ovpApp.video', []).constant('TWCVideoJS', TWCVideoJS);
                        angular.module('lib.splunk', []).constant('splunk', splunk);

                        window.angularBootstrap();
                    });
                });
            }//End badBrowser check
        });
});
