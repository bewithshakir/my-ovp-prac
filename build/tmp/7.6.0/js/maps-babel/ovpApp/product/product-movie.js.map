{"version":3,"sources":["ovpApp/product/product-movie.js"],"names":[],"mappings":"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","file":"ovpApp/product/product-movie.js","sourcesContent":["(function () {\n    'use strict';\n    angular.module('ovpApp.product.movie', [\n        'ovpApp.config',\n        'ovpApp.directives.carousel',\n        'ovpApp.directives.person',\n        'ovpApp.directives.fallbackImage',\n        'ovpApp.components.ovp.rating',\n        'ovpApp.components.fancy-ratings',\n        'ovpApp.services.locationService',\n        'ovpApp.dataDelegate',\n        'ovpApp.search.searchService',\n        'ovpApp.product.actionMenu',\n        'ovpApp.product.info',\n        'ovpApp.product.otherWays',\n        'ovpApp.product.productActionService',\n        'ovpApp.product.focusRestore',\n        'ovpApp.messages',\n        'ovpApp.services.parentalControlsService',\n        'ovpApp.services.dateFormat',\n        'ui.router',\n        'ovpApp.playerControls',\n        'ovpApp.components.modal'\n    ])\n    .component('productMovie', {\n        bindings: {\n            fetcher: '<', // Method for fetching the movie. Used if a refresh is needed\n            movie: '<',\n            blocked: '<',\n            cameFromWatchLater: '<'\n        },\n        templateUrl: '/js/ovpApp/product/product-movie.html',\n        controller: class ProductMovie {\n            constructor(messages, $scope, $rootScope, $state, productService, locationService, $q) {\n                angular.extend(this, {messages, $scope, $rootScope, $state, productService, locationService, $q});\n            }\n\n            $onInit() {\n                this.$rootScope.$emit('ovp:setPageTitle', this.movie.title);\n\n                this.entitled = this.movie.isEntitled !== false;\n                this.deregister = [];\n\n                this.initParentalControls();\n                this.initOoh();\n\n                this.deregister.push(this.$scope.$on('update-dvr',\n                    (event, schedule, asset, action) => {\n                        this.actionExecuting(asset, action);\n                    }\n                ));\n\n                // Focus action button if navigating back from trailer playback\n                if (this.$state.previous && this.$state.previous.name === 'ovp.ondemand.playProduct') {\n                    let isTrailer = this.$state.previous.fromParams.trailer === 'true';\n                    this.movie.actions.forEach(action => {\n                        if (isTrailer && action.actionType.startsWith('watchTrailer')) {\n                            action.focus = true;\n                        }\n                    });\n                }\n\n                this.$rootScope.$broadcast('pageChangeComplete', this.$state.current);\n            }\n\n            $onDestroy() {\n                this.deregister.forEach(d => d());\n            }\n\n            initParentalControls() {\n                this.deregister.push(this.$rootScope.$on('ParentalControls:updated',\n                    () => this.updateBlocked()));\n            }\n\n            initOoh() {\n                this.locationService.getLocation().then((location) => {\n                    this.oohUnavailable = !location.behindOwnModem && !this.movie.availableOutOfHome;\n                });\n\n                this.deregister.push(this.$scope.$on('LocationService:locationChanged', (event, location) => {\n                    this.oohUnavailable = !location.behindOwnModem && !this.movie.availableOutOfHome;\n                }));\n            }\n\n            updateBlocked() {\n                this.movie.isBlocked.then(isBlocked => this.blocked = isBlocked);\n            }\n\n\n            actionExecuting(asset, action) {\n                if (this.fetcher) {\n                    const waitForFresh = true;\n                    const promise = this.$q.when(this.fetcher(waitForFresh))\n                        .then(asset => {\n                            this.movie = asset;\n                            // Focus fist action after performing action\n                            if (this.movie.actions) {\n                                this.movie.actions[0].focus = true;\n                            }\n                        });\n                    this.$scope.$broadcast('product:update-started', asset, action, promise);\n                }\n            }\n\n            availabilityMessage() {\n                return this.productService.availabilityMessage(this.movie, this.cameFromWatchLater) || '';\n            }\n\n            getSectionAriaLabel() {\n                return this.movie.title + ', ' + this.movie.year + ', ' +\n                    this.movie.rating + ', ' + this.movie.actorsString + ', ' +\n                    this.availabilityMessage() + ', ' + this.movie.longDescription ;\n            }\n\n        }\n    });\n})();\n"],"sourceRoot":"/source/"}