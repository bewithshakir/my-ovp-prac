{"version":3,"sources":["ovpApp/components/loading-tracker/loading-tracker.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,CAAC,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEjiB,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AAJhH,CAAC,YAAM;IACH;IACA,QAAQ,OAAO,oCAAoC,CAC3C,4BACH,UAAU,kBAAkB;QACzB,aAAa;QACb,YAAU,CAAA,YAAA;;;;YAEK,SAFG,yBAEF,QAAQ,UAAU,gBAAgB;gBAM9C,gBAAgB,MARF;;gBAGV,QAAQ,OAAO,MAAM;oBACjB,QAAA,QAAQ,UAAA,UAAU,gBAAA;;;;YAW9B,aAfkB,0BAAwB,CAAA;gBAgBtC,KAAK;gBACL,OATO,SAAA,UAAG;oBAUN,IAAI,QAAQ;;oBATZ,IAAI,iBAAiB;;oBAErB,KAAK,OAAO,IAAI,mBAAmB,UAAC,OAAO,SAAS,SAAY;wBAC5D,MAAK,eAAe,WAAW;wBAC/B,IAAI,QAAQ,UAAU,UAAU;4BAC5B,MAAK,UAAU;+BACZ;4BACH,MAAK,UAAU;;;;oBAIvB,IAAI,QAAQ,KAAK,SAAS;oBAC1B,IAAI,QAAQ,GAAG;;wBAEX,KAAK,SAAS,IAAI,gBAAgB,EAAE,QAAQ;;;oBAGhD,KAAK,OAAO,IAAI,0BAA0B,YAAA;wBAYtC,OAZ4C,MAAK;;;oBAErD,KAAK;;eAeV;gBACC,KAAK;gBACL,OAdK,SAAA,QAAG;oBACJ,IAAI,KAAK,kBAAkB,KAAK,eAAe,YAAY;wBACvD,KAAK,eAAe;;oBAExB,KAAK,iBAAiB,KAAK,eAAe,EAAC,iBAAiB;;;;YAkBpE,OArDkB;;;KAuCzB","file":"ovpApp/components/loading-tracker/loading-tracker.js","sourcesContent":["(() => {\n    'use strict';\n    angular.module('ovpApp.components.loadingTracker', [\n            'ajoslin.promise-tracker'])\n        .component('loadingTracker', {\n            templateUrl: '/js/ovpApp/components/loading-tracker/loading-tracker.html',\n            controller: class LoadingTrackerController {\n                /* @ngInject */\n                constructor($scope, $element, promiseTracker) {\n                    angular.extend(this, {\n                        $scope, $element, promiseTracker\n                    });\n                }\n\n                $onInit() {\n                    var defaultMessage = 'Loading...';\n\n                    this.$scope.$on('message:loading', (event, promise, message) => {\n                        this.loadingTracker.addPromise(promise);\n                        if (angular.isDefined(message)) {\n                            this.message = message;\n                        } else {\n                            this.message = defaultMessage;\n                        }\n                    });\n\n                    var width = this.$element.width();\n                    if (width > 0) {\n                        //element is fixed at 50% right, so set negative margin\n                        this.$element.css('margin-right', -(width / 2));\n                    }\n\n                    this.$scope.$on('message:loading:cancel', () => this.reset());\n\n                    this.reset();\n                }\n\n                reset() {\n                    if (this.loadingTracker && this.loadingTracker.tracking()) {\n                        this.loadingTracker.cancel();\n                    }\n                    this.loadingTracker = this.promiseTracker({activationDelay: 150});\n                }\n            }\n        });\n})();\n"],"sourceRoot":"/source/"}