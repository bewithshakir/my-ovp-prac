{"version":3,"sources":["ovpApp/directives/ovp-fullscreen.js"],"names":[],"mappings":"AAAA;AACA;;AAAC,CAAA,YAAY;IACT;;;IAEA,QACK,OAAO,oCAAoC,IAC3C,UAAU,uBAAuB,qBACjC,QAAQ,iBAAiB;;;IAG9B,SAAS,oBAAoB,WAAW,UAAU,QAAQ,eAAe;QACrE,IAAI,YAAY;YACZ,MAAM;YACN,UAAU;;QAEd,OAAO;;QAEP,SAAS,KAAK,OAAO,SAAS,MAAM;YAChC,IAAI,KAAK,OAAO,KAAK,wBAAwB,QAAQ;gBACjD,WAAW,SAAX,WAAiB;gBACb,SAAS,YAAA;oBAAT,OAAe,GAAG,OAAO,EAAC,WAAW,cAAc;;;;YAG3D,UAAU,GAAG,4BACT,yBACA,sBACA,wBACA,oBACA;;YAEJ,MAAM,IAAI,YAAY,YAAM;gBACxB,UAAU,IAAI,4BACV,yBACA,sBACA,wBACA,oBACA;;;;;;IAMhB,SAAS,gBAAgB;QACrB,IAAI,UAAU;YACV,WAAA;YACA,QAAA;YACA,gBAAA;;QAEJ,OAAO;;;;QAIP,SAAS,YAAY;YACjB,OAAQ,CAAC,CAAC,SAAS,qBACf,CAAC,CAAC,SAAS,wBACX,CAAC,CAAC,SAAS,2BACX,CAAC,CAAC,SAAS;;;QAGnB,SAAS,OAAO,eAAe;YAC3B,IAAI,CAAC,aAAa;gBACd,IAAI,cAAc,mBAAmB;oBACjC,cAAc;uBACX,IAAI,cAAc,qBAAqB;oBAC1C,cAAc;uBACX,IAAI,cAAc,sBAAsB;oBAC3C,cAAc;uBACX,IAAI,cAAc,yBAAyB;oBAC9C,cAAc,wBAAwB,QAAQ;;mBAE/C;gBACH;;;;QAIR,SAAS,iBAAiB;YACtB,IAAI,SAAS,gBAAgB;gBACzB,SAAS;mBACN,IAAI,SAAS,kBAAkB;gBAClC,SAAS;mBACN,IAAI,SAAS,qBAAqB;gBACrC,SAAS;mBACN,IAAI,SAAS,sBAAsB;gBACtC,SAAS;;;;KAIpB","file":"ovpApp/directives/ovp-fullscreen.js","sourcesContent":["/* globals document, Element*/\n(function () {\n    'use strict';\n\n    angular\n        .module('ovpApp.directives.ovp-fullscreen', [])\n        .directive('ovpFullscreenToggle', ovpFullscreenToggle)\n        .factory('ovpFullscreen', ovpFullscreen);\n\n    /* @ngInject */\n    function ovpFullscreenToggle($document, $timeout, $parse, ovpFullscreen) {\n        var directive = {\n            link: link,\n            restrict: 'A'\n        };\n        return directive;\n\n        function link(scope, element, attr) {\n            let cb = $parse(attr.ovpFullscreenToggle) || angular.noop,\n                callback = () => {\n                    $timeout(() => cb(scope, {isEnabled: ovpFullscreen.isEnabled()}));\n                };\n\n            $document.on('webkitfullscreenchange ' +\n                'mozfullscreenchange ' +\n                'fullscreenchange ' +\n                'MSFullscreenChange ' +\n                'fullscreenChange',\n                callback);\n\n            scope.$on('$destroy', () => {\n                $document.off('webkitfullscreenchange ' +\n                    'mozfullscreenchange ' +\n                    'fullscreenchange ' +\n                    'MSFullscreenChange ' +\n                    'fullscreenChange',\n                    callback);\n            });\n        }\n    }\n\n    /* @ngInject */\n    function ovpFullscreen() {\n        let service = {\n            isEnabled,\n            toggle,\n            exitFullscreen\n        };\n        return service;\n\n        ////////////////\n\n        function isEnabled() {\n            return (!!document.fullscreenElement ||\n                !!document.mozFullScreenElement ||\n                !!document.webkitFullscreenElement ||\n                !!document.msFullscreenElement);\n        }\n\n        function toggle(playerElement) {\n            if (!isEnabled()) {\n                if (playerElement.requestFullscreen) {\n                    playerElement.requestFullscreen();\n                } else if (playerElement.msRequestFullscreen) {\n                    playerElement.msRequestFullscreen();\n                } else if (playerElement.mozRequestFullScreen) {\n                    playerElement.mozRequestFullScreen();\n                } else if (playerElement.webkitRequestFullscreen) {\n                    playerElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n                }\n            } else {\n                exitFullscreen();\n            }\n        }\n\n        function exitFullscreen() {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            } else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            } else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            } else if (document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            }\n        }\n    }\n}());\n"],"sourceRoot":"/source/"}