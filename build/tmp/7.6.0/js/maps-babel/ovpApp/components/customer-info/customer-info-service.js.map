{"version":3,"sources":["ovpApp/components/customer-info/customer-info-service.js"],"names":[],"mappings":"AAAA;;AAAC,CAAA,YAAY;IACT;;;IAEA,QAAQ,OAAO,+BAA+B,CAC1C,kBACH,QAAQ,uBAAuB;;;IAGhC,SAAS,oBAAoB,QAAQ,OAAO,IAAI;QAC5C,IAAI,OAAI;;QAER,IAAI,UAAU;YACV,iBAAA;YACA,SAAA;;;QAGJ,OAAO;;;;QAIP,SAAS,kBAAqC;YAC1C,IADqB,gBAAa,UAAA,UAAA,KAAA,UAAA,OAAA,YAAC,QAAK,UAAA;;YACxC,OAAO,MAAM;gBACL,QAAQ;gBACR,OAAO;gBACP,KAAK,OAAO,iBAAiB;gBAC7B,iBAAiB;gBACjB,eAAe;eAChB,KAAK,UAAU,UAAU;gBACxB,IAAI,OAAO,SAAS;gBACpB,OAAO,KAAK;gBACZ,OAAO;eACT,SAAO,YAAM;gBACX,OAAO,GAAG,OAAO;oBACb,WAAW;;;;;QAK3B,SAAS,UAA6B;YAGlC,IAHa,gBAAa,UAAA,UAAA,KAAA,UAAA,OAAA,YAAC,QAAK,UAAA;;YAChC,IAAI,MAAM;gBACN,OAAO,GAAG,QAAQ;mBACf;gBACH,OAAO,gBAAgB;;;;KAIlC","file":"ovpApp/components/customer-info/customer-info-service.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular.module('ovpApp.customerInfo.service', [\n        'ovpApp.config'])\n    .factory('customerInfoService', customerInfoService);\n\n    /* @ngInject */\n    function customerInfoService(config, $http, $q) {\n        let name;\n\n        let service = {\n            getCustomerInfo,\n            getName\n        };\n\n        return service;\n\n        /////////////////\n\n        function getCustomerInfo(bypassRefresh=false) {\n            return $http({\n                    method: 'GET',\n                    cache: false,\n                    url: config.parentalControls.parentalControlsForUserUrl(),\n                    withCredentials: true,\n                    bypassRefresh: bypassRefresh\n                }).then(function (response) {\n                    var data = response.data;\n                    name = data.loggedInUsername;\n                    return name;\n                }).catch(() => {\n                    return $q.reject({\n                        errorCode: 'WPC-1005'\n                    });\n                });\n        }\n\n        function getName(bypassRefresh=false) {\n            if (name) {\n                return $q.resolve(name);\n            } else {\n                return getCustomerInfo(bypassRefresh);\n            }\n        }\n    }\n}());\n"],"sourceRoot":"/source/"}