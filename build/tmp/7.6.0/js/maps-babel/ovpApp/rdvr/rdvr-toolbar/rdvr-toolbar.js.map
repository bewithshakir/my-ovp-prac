{"version":3,"sources":["ovpApp/rdvr/rdvr-toolbar/rdvr-toolbar.js"],"names":[],"mappings":"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","file":"ovpApp/rdvr/rdvr-toolbar/rdvr-toolbar.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * rdvr-toolbar\n     *\n     * Renders a set of widgets for the top of the rdvr pages\n     *\n     * Example Usage:\n     * <rdvr-toolbar options=\"someInputValue\"></rdvr-toolbar>\n     *\n     * Bindings:\n     *    options: ([type]) [description]\n     */\n    angular.module('ovpApp.rdvr.rdvrToolbar', ['ovpApp.stbPicker', 'ovpApp.renameStb'])\n        .component('rdvrToolbar', {\n            bindings: {\n                options: '<'\n            },\n            templateUrl: '/js/ovpApp/rdvr/rdvr-toolbar/rdvr-toolbar.html',\n            controller: class RdvrToolbar {\n                /* @ngInject */\n                constructor($timeout, $interval, dateUtil, rx, stbService, modal, $q) {\n                    angular.extend(this, {$timeout, $interval, dateUtil, rx, stbService, modal, $q});\n                }\n\n                $onInit() {\n                    this.subscription = this.stbService.currentStbSource\n                        .filter(stb => stb && stb.dvr === true)\n                        .subscribe(stb => this.stb = stb);\n                }\n\n                $onDestroy() {\n                    this.subscription.dispose();\n                }\n\n                $onChanges(changes) {\n                    if (changes.options) {\n                        this.showToggler = changes.options.showToggler || false;\n                    }\n                }\n\n                showDvrPicker() {\n                    this.modal.open({\n                        component: 'stb-picker',\n                        windowClass: 'ovp-watch-on-tv-picker-container',\n                        showCloseIcon: false,\n                        ariaDescribedBy: 'picker-description',\n                        ariaLabelledBy: 'picker-label',\n                        resolve: {\n                            stbs: () => {\n                                return this.$q.all([\n                                    this.stbService.getSTBs(),\n                                    this.stbService.getCurrentStb()\n                                ]).then(([stbs, current]) => {\n                                    return stbs.filter(s => s.dvr)\n                                        // Move the selected set top box to the front of the list\n                                        .sort((a, b) => {\n                                            if (a.macAddress === current.macAddress) {\n                                                return -1;\n                                            } else if (b.macAddress === current.macAddress) {\n                                                return 1;\n                                            }\n                                            return 0;\n                                        });\n                                });\n                            },\n                            title: () => 'Select your DVR',\n                            ariaDescription: () => 'Choose a DVR device from the list to manage'\n                        }\n                    }).result.then(this.stbService.setCurrentStb);\n                }\n\n                renameStb() {\n                    this.modal.open({\n                        component: 'rename-stb',\n                        windowClass: 'ovp-watch-on-tv-picker-container',\n                        showCloseIcon: false,\n                        ariaLabelledBy: 'rename-label',\n                        resolve: {\n                            stb: () => this.stb\n                        }\n                    });\n                }\n            }\n        });\n})();\n"],"sourceRoot":"/source/"}