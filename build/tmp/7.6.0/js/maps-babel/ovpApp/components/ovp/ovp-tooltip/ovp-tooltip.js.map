{"version":3,"sources":["ovpApp/components/ovp/ovp-tooltip/ovp-tooltip.js"],"names":[],"mappings":"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","file":"ovpApp/components/ovp/ovp-tooltip/ovp-tooltip.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular.module('ovpApp.components.ovp.tooltip', [])\n\n    .constant('DEFAULT_SHOW_TIMEOUT', 2000)\n\n    .constant('DEFAULT_HIDE_TIMEOUT', 1000)\n\n    .constant('ORIENTATIONS', {\n        HORIZONTAL: 'horizontal', // Attempt to display on left or right of trigger\n        VERTICAL: 'vertical', // Attempt to display above or below trigger\n        LEFT: 'left', // Always display to the left of trigger\n        RIGHT: 'right', // Always display to the right of trigger\n        BOTTOM: 'bottom', // Always display below trigger\n        TOP: 'top', // Always display above trigger\n        AUTO: 'auto' // Display in whichever area has more viewport room.\n    })\n\n    .constant('POSITIONS', {\n        TOP: 'top',\n        BOTTOM: 'bottom',\n        LEFT: 'left',\n        RIGHT: 'right'\n    })\n\n    .constant('ARROW_WIDTH', 23)\n\n    .directive('ovpTooltip', ovpTooltip);\n\n    /* @ngInject */\n    function ovpTooltip($timeout, DEFAULT_SHOW_TIMEOUT, DEFAULT_HIDE_TIMEOUT) {\n\n        var tooltipTimeout, currentScope;\n\n        function enteredTrigger(scope) {\n            currentScope = scope;\n            $timeout.cancel(tooltipTimeout);\n            tooltipTimeout = $timeout(function () {\n                scope.show();\n            }, DEFAULT_SHOW_TIMEOUT);\n        }\n\n        function leftTrigger(scope) {\n            $timeout.cancel(tooltipTimeout);\n            tooltipTimeout = $timeout(function () {\n                scope.hide();\n            }, DEFAULT_HIDE_TIMEOUT);\n            tooltipTimeout.then(null, function () {\n                if (currentScope !== scope) {\n                    scope.hide();\n                }\n            });\n        }\n\n        function getNonNgParent($element) {\n            while ($element.length > 0 && $element[0].tagName.toUpperCase().indexOf('NG-') === 0) {\n                $element = $element.parent();\n            }\n            return $element;\n        }\n\n        return {\n            restrict: 'E',\n            controller: [\n\n                '$scope', '$element', '$attrs', '$document', 'ORIENTATIONS', 'POSITIONS', 'ARROW_WIDTH', '$parse',\n\n                function ($scope, $element, $attrs, $document, ORIENTATIONS, POSITIONS, ARROW_WIDTH, $parse) {\n\n                    $scope.orientation = $attrs.orientation || ORIENTATIONS.AUTO;\n\n                    $scope.positions = POSITIONS;\n\n                    // TODO - This should default to first parent\n                    // that is not ngInclude for when utilized within\n                    // views. Could potentially pass this in as an attrs somehow.\n                    $scope.trigger = getNonNgParent($element.parent());\n\n                    var enterTrigger = angular.bind(this, enteredTrigger, $scope),\n                        leaveTrigger = angular.bind(this, leftTrigger, $scope);\n\n                    $scope.trigger.bind('mouseover', enterTrigger);\n                    $scope.trigger.bind('mouseout', leaveTrigger);\n\n                    $element.bind('mouseover', enterTrigger);\n                    $element.bind('mouseout', leaveTrigger);\n\n                    $scope.$on('$destroy', function () {\n                        $timeout.cancel(tooltipTimeout);\n                        $scope.trigger.unbind('mouseover', enterTrigger);\n                        $scope.trigger.unbind('mouseout', leaveTrigger);\n                        $element.unbind('mouseover', enterTrigger);\n                        $element.unbind('mouseout', leaveTrigger);\n                        $element.remove();\n                    });\n\n                    $scope.showTooltip = false;\n\n                    $scope.getRightPosition = function () {\n                        return $scope.trigger.offset().left + $scope.trigger.outerWidth() + ARROW_WIDTH;\n                    };\n\n                    $scope.getLeftPosition = function () {\n                        return $scope.trigger.offset().left - $element.outerWidth() - ARROW_WIDTH;\n                    };\n\n                    $scope.getHorizontalOrientation = function () {\n\n                        var spaceLeft = $scope.trigger.offset().left - $document.scrollLeft(),\n                            spaceRight = ($document.outerWidth() + $document.scrollLeft()) -\n                                ($scope.trigger.offset().left + $scope.trigger.outerWidth()),\n                            leftPos;\n\n                        if (spaceRight > spaceLeft) {\n                            leftPos = $scope.getRightPosition();\n                            $scope.position = POSITIONS.RIGHT;\n                        } else {\n                            leftPos = $scope.getLeftPosition();\n                            $scope.position = POSITIONS.LEFT;\n                        }\n\n                        return {\n                            top: ($scope.trigger.offset().top + ($scope.trigger.outerHeight() / 2)) -\n                                ($element.outerHeight() / 2) + 'px',\n                            left: leftPos + 'px'\n                        };\n\n                    };\n\n                    $scope.getPositioning = function () {\n\n                        var position;\n\n                        if ($scope.orientation === ORIENTATIONS.HORIZONTAL) {\n                            position = $scope.getHorizontalOrientation();\n                        } else {\n                            throw 'Not implemented';\n                        }\n\n                        // If onPositionUpdate is provided call with\n                        // current scope.\n                        if ($attrs.onPositionUpdate) {\n                            $parse($attrs.onPositionUpdate)($scope, {\n                                position: position\n                            });\n                        }\n\n                        return position;\n\n                    };\n\n                    $scope.show = function () {\n                        if (!$scope.showTooltip) {\n                            $scope.showTooltip = true;\n                            $element.addClass('ovp-tooltip');\n\n                            if ($attrs.class) {\n                                $element.addClass($attrs.class);\n                            }\n\n                            $element.appendTo($document.context.body);\n                            $element.css($scope.getPositioning());\n\n                            $scope.$emit('tooltipShown');\n                        }\n                    };\n\n                    $scope.hide = function () {\n                        if ($scope.showTooltip) {\n                            $scope.showTooltip = false;\n                            $element.removeClass('ovp-tooltip');\n\n                            if ($attrs.class) {\n                                $element.removeClass($attrs.class);\n                            }\n\n                            $element.appendTo($scope.trigger);\n\n                            $scope.$emit('tooltipClosed');\n                        }\n                    };\n                }\n\n            ],\n            transclude: true,\n            scope: false,\n            templateUrl: '/js/ovpApp/components/ovp/ovp-tooltip/ovp-tooltip.html'\n        };\n    }\n}());\n"],"sourceRoot":"/source/"}