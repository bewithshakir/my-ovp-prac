{"version":3,"sources":["ovpApp/ondemand/ondemand-goback.js"],"names":[],"mappings":"AAAA;;AAEA,SAAS,mBAAmB,KAAK,EAAE,IAAI,MAAM,QAAQ,MAAM,EAAE,KAAK,IAAI,IAAI,GAAG,OAAO,MAAM,IAAI,SAAS,IAAI,IAAI,QAAQ,KAAK,KAAK,KAAK,IAAI,IAAI,OAAO,aAAa,EAAE,OAAO,MAAM,KAAK;;AAFrL,CAAA,YAAY;IACT;;;IAEA,QACK,OAAO,0BAA0B,CAC9B,qCAEH,QAAQ,kBAAkB;;;IAG/B,SAAS,eAAe,SAAS,QAAQ,eAAe;QACpD,OAAO,UAAU,OAAO,WAAW;;YAE/B,cAAc;;YAEd,IAAI,OAAO,YAAY,OAAO,SAAS,SAAS,IAAI;gBAChD,IAAI,OAAO,SAAS,SAAS,gBAAgB;;;;oBAIzC;;;gBAGJ,QAAQ,QAAQ;mBACb;;gBAEH,IAAI,aAAa,SAAS,MAAM,YAAY;oBACxC,OAAO,GAAE,MAAT,QAAM,mBAAO,MAAM;uBAChB;oBACH,OAAO,GAAG;;;;;KAKzB","file":"ovpApp/ondemand/ondemand-goback.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('ovpApp.ondemand.goback', [\n            'ovpApp.directives.ovp-fullscreen'\n        ])\n        .factory('ondemandGoBack', ondemandGoBack);\n\n    /** @ngInject */\n    function ondemandGoBack($window, $state, ovpFullscreen) {\n        return function (asset, isTrailer) {\n            //Make sure we exit full screen before we go back.\n            ovpFullscreen.exitFullscreen();\n\n            if ($state.previous && $state.previous.name !== '') {\n                if ($state.previous.name === 'ovp.ondemand') {\n                    // required to handle goBack firing twice for a Deep linked asset\n                    // once in onUnentitled and other from onPlayVodAssetError\n                    // for a Deep linked asset which is not avilable OOH.\n                    return;\n                }\n                // User was navigating in the app. Return them to the previous page\n                $window.history.back();\n            } else {\n                // Playback was deep linked into, so there's nothing really to go \"back\" to\n                if (isTrailer && asset && asset.clickRoute) {\n                    $state.go(...asset.clickRoute);\n                } else {\n                    $state.go('ovp.ondemand');\n                }\n            }\n        };\n    }\n}());\n"],"sourceRoot":"/source/"}