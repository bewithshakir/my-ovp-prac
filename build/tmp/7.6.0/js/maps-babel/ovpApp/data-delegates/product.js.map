{"version":3,"sources":["ovpApp/data-delegates/product.js"],"names":[],"mappings":"AAAA;;AAAA,CAAC,YAAY;IACT;;;;IAEA,QACK,OAAO,uBACP,QAAQ,8BAA8B,4BACtC,IAAI;;;;;;;;;IAST,SAAS,2BAA2B,cAAc,iBAAiB,eAC/D,gBAAgB,QAAQ,kCAAiC;QACzD,IAAI,SAAS,cAAc;;QAE3B,OAAO,IAAI,aACP,QAAQ,OAAO,IAAI,cAAc,sBAAsB;YACnD,eAAe;YACf,YAAY,OAAO,UAAU,MAAM;;;;;;;;;;gBAU/B,OAAO,CAAC,iBAAiB;oBACrB,OAAO,KAAK;oBACZ,KAAK,KAAK;;;YAGlB,UAAU;YACV,UAAU,OAAO,cAAc;YAC/B,UAAU,SAAA,SAAU,MAAM;gBACtB,IAAI,WAAW,gBAAgB,0BAA0B,KAAK;gBAC9D,IAAI,UAAU;;;oBAGV,SAAS,oBAAoB,KAAK,IAAI,SAAS,mBAAmB,SAAS;;gBAE/E,OAAO;;YAEX,WAAW,SAAA,YAAY;gBACnB,IAAI,KAAK,UAAU;oBACf,OAAO,KAAM,SAAS,oBAAoB,KAAK,SAAS,iBAAkB;;;;;;;IAO9F,SAAS,iBAAiB,4BAA4B,iBAAiB;QACnE,SAAS,UAAU,OAAO;YACtB,OAAO,MAAM,eAAe;;;QAGhC,gBAAgB,2BAA2B,4BAA4B;;KAE1E","file":"ovpApp/data-delegates/product.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('ovpApp.dataDelegate')\n        .factory('productViewModelDefinition', productViewModelDefinition)\n        .run(registerDelegate);\n\n    /**\n     * \"Product\" objects are used in search to represent a movie. Not to be confused\n     * with \"Event\" objects, which also represent a movie (or episode) but are mostly\n     * used in a non-search context.\n     */\n\n    /* @ngInject */\n    function productViewModelDefinition(DataDelegate, delegateFactory, delegateUtils,\n        productService, $state, BookmarkService/*, $rootScope*/) {\n        let cached = delegateUtils.cached;\n\n        return new DataDelegate(\n            angular.extend({}, delegateUtils.standardSearchParams, {\n                resultDisplay: 'resultDisplay',\n                clickRoute: cached(function (data) {\n                    // TODO: Analytics Event\n                    // $rootScope.$emit('EG:searchResultSelected', {\n                    //     type: data.resultType,\n                    //     facet: data.resultEnum,\n                    //     title: data.searchStringMatch,\n                    //     searchStringMatch: data.searchStringMatch,\n                    //     tmsProgramId: data.tmsProgramId\n                    // });\n\n                    return ['product.event', {\n                        tmsId: data.tmsProgramId,\n                        uri: data.uri\n                    }];\n                }),\n                playable: 'availableOndemand',\n                imageUri: cached(delegateUtils.createProductImageFunction()),\n                bookmark: function (data) {\n                    let bookmark = BookmarkService.getBookmarkByTmsProgramId(data.tmsProgramId);\n                    if (bookmark) {\n                        // NGC-4273: Because of ODN bug we are getting invalid playMarkerSeconds value\n                        // when we play an asset till end on ODN STB.\n                        bookmark.playMarkerSeconds = Math.min(bookmark.playMarkerSeconds, bookmark.runtimeSeconds);\n                    }\n                    return bookmark;\n                },\n                playedPct: function () {\n                    if (this.bookmark) {\n                        return (this.bookmark.playMarkerSeconds / this.bookmark.runtimeSeconds) * 100;\n                    }\n                }\n            }));\n    }\n\n    /* @ngInject */\n    function registerDelegate(productViewModelDefinition, delegateFactory) {\n        function isProduct(asset) {\n            return asset.resultType === 'product';\n        }\n\n        delegateFactory.registerDelegateDefinition(productViewModelDefinition, isProduct);\n    }\n})();\n"],"sourceRoot":"/source/"}