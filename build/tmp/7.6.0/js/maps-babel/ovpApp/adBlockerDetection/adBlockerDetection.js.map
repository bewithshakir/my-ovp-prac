{"version":3,"sources":["ovpApp/adBlockerDetection/adBlockerDetection.js"],"names":[],"mappings":"AAAA;AACA;;AAAA,CAAC,YAAY;IACT;;;IAEA,QAAQ,OAAO,6BAA6B,CACxC,kBAEH,QAAQ,sBAAsB;;;IAG/B,SAAS,mBAAmB,WAAW,UAAU,MAAM,IAAI,QAAQ;;QAE/D,IAAI,QAAQ,OAAO,mBAAmB;QACtC,IAAI,OAAI;QACR,IAAI,YAAY,uDAChB;QACA,IAAI,YAAY,mDAChB;;QAEA,OAAO;YACH,YAAY;;;;;QAKhB,SAAS,oBAAoB;YACzB,OAAO,SAAS,cAAc;YAC9B,KAAK,YAAY;YACjB,KAAK,aAAa,SAAS;YAC3B,KAAK,aAAa,SAAS;YAC3B,SAAS,KAAK,YAAY;;;QAG9B,SAAS,cAAc;YACnB,KAAK;;;QAGT,SAAS,QAAQ;YACb,IAAI,QAAQ,GAAG;;YAEf,IAAI,CAAC,OAAO,mBAAmB,SAAS;gBACpC,IAAI,OAAO;oBACP,KAAK,MAAM;;;gBAGf,OAAO,GAAG;;;YAGd;YACA,SAAS,YAAY;gBACjB,IAAI,SAAS,KAAK,aAAa,WAAW,QAC1C,KAAK,iBAAiB,QACtB,KAAK,iBAAiB,KACtB,KAAK,eAAe,KACpB,KAAK,cAAc,KACnB,KAAK,gBAAgB,KACrB,KAAK,iBAAiB,KACtB,KAAK,gBAAgB,GAAG;oBACpB,IAAI,OAAO;wBACP,KAAK,MAAM;;oBAEf,MAAM,OAAO;uBACV;oBACH,IAAI,OAAO;wBACP,KAAK,MAAM;;oBAEf,MAAM,QAAQ;;;gBAGlB;eACD;;YAEH,OAAO,MAAM;;;QAGjB,SAAS,aAAa;YAClB,OAAO;;;KAKd","file":"ovpApp/adBlockerDetection/adBlockerDetection.js","sourcesContent":["/*globals document */\n(function () {\n    'use strict';\n\n    angular.module('ovpApp.adBlockerDetection', [\n        'ovpApp.config'\n    ])\n    .factory('adBlockerDetection', adBlockerDetection);\n\n    /* @ngInject */\n    function adBlockerDetection($interval, $timeout, $log, $q, config) {\n\n        let debug = config.adBlockerDetection.debug;\n        let bait;\n        let baitClass = 'pub_300x250 pub_300x250m pub_728x90 text-ad textAd' +\n        ' text_ad text_ads text-ads text-ad-links';\n        let baitStyle = 'width: 1px !important; height: 1px !important;' +\n        ' position: absolute !important; left: -10000px !important; top: -1000px !important;';\n\n        return {\n            adsBlocked: adsBlocked\n        };\n\n        ///////////////////////\n\n        function createBaitElement() {\n            bait = document.createElement('div');\n            bait.innerHTML = '&nbsp;';\n            bait.setAttribute('class', baitClass);\n            bait.setAttribute('style', baitStyle);\n            document.body.appendChild(bait);\n        }\n\n        function destroyBait() {\n            bait.remove();\n        }\n\n        function check() {\n            var defer = $q.defer();\n\n            if (!config.adBlockerDetection.enabled) {\n                if (debug) {\n                    $log.debug('AdBlock detection disabled');\n                }\n\n                return $q.resolve();\n            }\n\n            createBaitElement();\n            $timeout(function () {\n                if (document.body.getAttribute('abp') !== null ||\n                bait.offsetParent === null ||\n                bait.offsetHeight === 0 ||\n                bait.offsetLeft === 0 ||\n                bait.offsetTop === 0 ||\n                bait.offsetWidth === 0 ||\n                bait.clientHeight === 0 ||\n                bait.clientWidth === 0) {\n                    if (debug) {\n                        $log.debug('ads blocked');\n                    }\n                    defer.reject(true);\n                } else {\n                    if (debug) {\n                        $log.debug('ads NOT blocked');\n                    }\n                    defer.resolve(false);\n                }\n\n                destroyBait();\n            }, 100);\n\n            return defer.promise;\n        }\n\n        function adsBlocked() {\n            return check();\n        }\n\n    }\n\n})();\n"],"sourceRoot":"/source/"}