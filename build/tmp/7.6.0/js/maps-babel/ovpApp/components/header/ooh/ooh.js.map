{"version":3,"sources":["ovpApp/components/header/ooh/ooh.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,CAAC,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEjiB,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AAJhH,CAAC,YAAM;IACH;;IAEA,QAAQ,OAAO,yBAAyB,CACpC,mBACA,4BACA,8BACA,2BACA,mCACA,8BACA,mCAEH,UAAU,OAAO;QACd,aAAa;QACb,YAAU,CAAA,YAAA;;;;YAEK,SAFG,cAEF,UAAU,UAAU,QAAQ,YAAY,aAAa,OAC7D,iBAAiB,cAAc,gBAAgB,mBAAmB;gBAFlE,gBAAgB,MADN;;gBAIV,QAAQ,OAAO,MAAM,EAAC,UAAA,UAAU,UAAA,UAAU,QAAA,QAAQ,YAAA,YAAY,aAAA,aAAa,OAAA;oBACvE,iBAAA,iBAAiB,cAAA,cAAc,gBAAA,gBAAgB,mBAAA;;;YAEvD,aAPc,eAAa,CAAA;gBAQvB,KAAK;gBACL,OADG,SAAA,UAAG;oBAEF,IAAI,QAAQ;;oBADhB,KAAK,UAAU,KAAK,kBAAkB,kBAAkB;oBACxD,KAAK,SAAS;wBACV,QAAQ;;oBAEZ,KAAK,OAAO,IAAI,mCAAmC,YAAA;wBAI3C,OAJiD,MAAK;;;eAO/D;gBACC,KAAK;gBACL,OANK,SAAA,YAAG;oBACR,KAAK;;eAQN;gBACC,KAAK;gBACL,OAPU,SAAA,eAAC,QAAQ;oBACnB,OAAO;oBACP,OAAO;oBACP,KAAK,OAAO,SAAS,CAAC,KAAK,OAAO;;eASnC;gBACC,KAAK;gBACL,OARc,SAAA,qBAAG;oBACjB,KAAK,MAAM,KAAK,KAAK,kBAAkB,gBAAgB;;eAUxD;gBACC,KAAK;gBACL,OATgB,SAAA,uBAAG;oBACnB,KAAK,MAAM,KAAK,KAAK,kBAAkB,gBAAgB;;eAWxD;gBACC,KAAK;gBACL,OAVa,SAAA,oBAAG;oBAChB,KAAK,MAAM,KAAK,KAAK,kBAAkB,gBAAgB;;eAYxD;gBACC,KAAK;gBACL,OAXO,SAAA,cAAG;oBAYN,IAAI,SAAS;;oBAXjB,IAAI,KAAK,eAAe,oBAAoB;;wBAExC;;oBAEJ,KAAK,aAAa,yBACb,KAAK,YAAA;wBAaF,OAbQ,OAAK,gBAAgB;uBAChC,KACG,UAAC,UAAQ;wBAaT,OAbc,OAAK,QAAQ;;;eAgBpC;gBACC,KAAK;gBACL,OAdG,SAAA,QAAC,UAAU;oBACd,IAAM,eAAe,OAAO,KAAK,WAAW,QAAQ,KAAK,YAAY,oBAAoB;wBACrF,qBAAqB,KAAK,WAAW,QAAQ,KAAK,YAAY,oBAAoB;;oBAEtF,IAAI,cAAc;wBACd,IAAI,CAAC,SAAS,MAAM;4BAChB,KAAK;+BACF,IAAI,CAAC,SAAS,gBAAgB;4BACjC,KAAK;;2BAEN,IAAI,uBAAuB,SAAS,gBAAgB;;wBAEvD,IAAI,CAAC,SAAS,gBAAgB;4BAC1B,KAAK;+BACF,IAAI,SAAS,gBAAgB;4BAChC,KAAK;;;;oBAKb,KAAK,QAAQ,CAAC,SAAS;oBACvB,KAAK,WAAW,QAAQ,KAAK,YAAY,gBAAgB,SAAS;;;;YAiBtE,OAxFc;;;KA2ErB","file":"ovpApp/components/header/ooh/ooh.js","sourcesContent":["(() => {\n    'use strict';\n\n    angular.module('ovpApp.components.ooh', [\n        'ovpApp.messages',\n        'ovpApp.filters.toTrusted',\n        'ovpApp.services.ovpStorage',\n        'ovpApp.components.alert',\n        'ovpApp.services.locationService',\n        'ovpApp.services.errorCodes',\n        'ovpApp.services.profileService'\n    ])\n    .component('ooh', {\n        templateUrl: '/js/ovpApp/components/header/ooh/ooh.html',\n        controller: class OohController {\n            /* @ngInject */\n            constructor($timeout, messages, $scope, ovpStorage, storageKeys, alert,\n                locationService, OauthService, profileService, errorCodesService) {\n                angular.extend(this, {$timeout, messages, $scope, ovpStorage, storageKeys, alert,\n                    locationService, OauthService, profileService, errorCodesService});\n            }\n\n            $onInit() {\n                this.tooltip = this.errorCodesService.getMessageForCode('WLC-1005');\n                this.status = {\n                    isopen: false\n                };\n                this.$scope.$on('LocationService:locationChanged', () => this.getLocation());\n            }\n\n            $postLink() {\n                this.getLocation();\n            }\n\n            toggleDropdown($event) {\n                $event.preventDefault();\n                $event.stopPropagation();\n                this.status.isopen = !this.status.isopen;\n            }\n\n            showOutOfUSMessage() {\n                this.alert.open(this.errorCodesService.getAlertForCode('WLC-1002'));\n            }\n\n            showOutOfHomeMessage() {\n                this.alert.open(this.errorCodesService.getAlertForCode('WLC-1006'));\n            }\n\n            showInHomeMessage() {\n                this.alert.open(this.errorCodesService.getAlertForCode('MSG-9100'));\n            }\n\n            getLocation() {\n                if (this.profileService.isSpecUOrBulkMDU()) {\n                    // Ignore OOH messages for specU / bulk MDU\n                    return;\n                }\n                this.OauthService.waitUntilAuthenticated()\n                    .then(() => this.locationService.getLocation())\n                    .then(\n                        (location) => this.oohDone(location)\n                    );\n            }\n\n            oohDone(location) {\n                const isFirstCheck = typeof this.ovpStorage.getItem(this.storageKeys.behindOwnModem) !== 'boolean',\n                    lastBehindOwnModem = this.ovpStorage.getItem(this.storageKeys.behindOwnModem) === true;\n\n                if (isFirstCheck) {\n                    if (!location.inUS) {\n                        this.showOutOfUSMessage();\n                    } else if (!location.behindOwnModem) {\n                        this.showOutOfHomeMessage();\n                    }\n                } else if (lastBehindOwnModem !== location.behindOwnModem) {\n\n                    if (!location.behindOwnModem) {\n                        this.showOutOfHomeMessage();\n                    } else if (location.behindOwnModem) {\n                        this.showInHomeMessage();\n                    }\n\n                }\n\n                this.isOoh = !location.behindOwnModem;\n                this.ovpStorage.setItem(this.storageKeys.behindOwnModem, location.behindOwnModem);\n            }\n        }\n    });\n})();\n"],"sourceRoot":"/source/"}