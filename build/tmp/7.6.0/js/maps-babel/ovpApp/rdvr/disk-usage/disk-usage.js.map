{"version":3,"sources":["ovpApp/rdvr/disk-usage/disk-usage.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,CAAC,YAAY,EAAE,SAAS,iBAAiB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK,iBAAiB,OAAO,UAAU,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,iBAAiB,YAAY,WAAW,aAAa,IAAI,aAAa,iBAAiB,aAAa,cAAc,OAAO;;AAEjiB,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;AAJhH,CAAC,YAAY;IACT;;;;;;;;;;IAUA,QAAQ,OAAO,yBAAyB,CAChC,2BACA,4BAEH,UAAU,aAAa;QACpB,UAAU;YACN,KAAK;;QAET,aAAa;QACb,YAAU,CAAA,YAAA;;;;YAEK,SAFG,UAEF,QAAQ,aAAa,YAAY;gBAI7C,gBAAgB,MANF;;gBAGV,QAAQ,OAAO,MAAM,EAAC,QAAA,QAAQ,aAAA,aAAa,YAAA;;;YAQnD,aAXkB,WAAS,CAAA;gBAYvB,KAAK;gBACL,OAPU,SAAA,WAAC,SAAS;oBAChB,IAAI,QAAQ,KAAK;wBACb,KAAK,aAAa,QAAQ,IAAI;;;eAUvC;gBACC,KAAK;gBACL,OARY,SAAA,aAAC,KAAK;oBASd,IAAI,QAAQ;;oBARZ,IAAI,KAAK,gBAAgB,MAAM;wBAC3B,IAAI,KAAK,cAAc;4BACnB,KAAK,aAAa;4BAClB,KAAK,eAAe;;wBAExB,KAAK,eAAe,KAAK,YAAY,SAAS,KACzC,UAAU,UAAA,QAAM;4BAUjB,OAVqB,MAAK,oBAAoB;;;;eAc3D;gBACC,KAAK;gBACL,OAZmB,SAAA,oBAAC,QAAQ;oBACxB,IAAI,CAAC,OAAO,SAAS,OAAO,QAAQ,OAAO,KAAK,gBAAgB;wBAC5D,KAAK,cAAc,KAAK,MAAM,OAAO,KAAK,iBAAiB;2BACxD;wBACH,KAAK,cAAc;;;eAe5B;gBACC,KAAK;gBACL,OAbU,SAAA,aAAG;oBACT,IAAI,KAAK,cAAc;wBACnB,KAAK,aAAa;;;eAgB3B;gBACC,KAAK;gBACL,OAde,SAAA,kBAAiB;oBAe5B,IAfY,MAAG,UAAA,UAAA,KAAA,UAAA,OAAA,YAAG,KAAK,MAAG,UAAA;;oBAC1B,OAAO,OAAO,IAAI,QAAQ,QAAQ,IAAI,cAAc;;;;YAoB5D,OA1DkB;;;KA0CzB","file":"ovpApp/rdvr/disk-usage/disk-usage.js","sourcesContent":["(function () {\n    'use strict';\n\n    /**\n     * diskUsage\n     *\n     * Displays disk usage bar\n     *\n     * Example Usage:\n     * <disk-usage></disk-usage>\n     */\n    angular.module('ovpApp.rdvr.diskUsage', [\n            'ovpApp.rdvr.rdvrService',\n            'ovpApp.services.rxUtils'\n        ])\n        .component('diskUsage', {\n            bindings: {\n                stb: '<'\n            },\n            templateUrl: '/js/ovpApp/rdvr/disk-usage/disk-usage.html',\n            controller: class DiskUsage {\n                /* @ngInject */\n                constructor($scope, rdvrService, stbService) {\n                    angular.extend(this, {$scope, rdvrService, stbService});\n                }\n\n                $onChanges(changes) {\n                    if (changes.stb) {\n                        this.getDiskUsage(changes.stb.currentValue);\n                    }\n                }\n\n                getDiskUsage(stb) {\n                    if (this.hasRdvrVersion2(stb)) {\n                        if (this.subscription) {\n                            this.subscription.dispose();\n                            this.subscription = null;\n                        }\n                        this.subscription = this.rdvrService.getUsage(stb)\n                            .subscribe(result => this.onDiskUsageReceived(result));\n                    }\n                }\n\n                onDiskUsageReceived(result) {\n                    if (!result.error && result.data && result.data.usedPercentage) {\n                        this.usedPercent = Math.floor(result.data.usedPercentage * 100);\n                    } else {\n                        this.usedPercent = 0;\n                    }\n                }\n\n                $onDestroy() {\n                    if (this.subscription) {\n                        this.subscription.dispose();\n                    }\n                }\n\n                hasRdvrVersion2(stb = this.stb) {\n                    return stb && stb.dvr === true && stb.rdvrVersion > 1;\n                }\n            }\n        });\n})();\n"],"sourceRoot":"/source/"}