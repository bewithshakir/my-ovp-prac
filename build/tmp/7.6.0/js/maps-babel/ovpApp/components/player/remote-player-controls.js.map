{"version":3,"sources":["ovpApp/components/player/remote-player-controls.js"],"names":[],"mappings":"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","file":"ovpApp/components/player/remote-player-controls.js","sourcesContent":["(() => {\n    'use strict';\n\n    angular.module('ovpApp.remotePlayer.controls', [\n        'ovpApp.components.ovp.remotePlayerCCSettings',\n        'ovpApp.components.modal'\n    ]).component('remotePlayerControls', {\n        bindings: {\n            asset: '<',\n            stb: '<'\n        },\n        templateUrl: '/js/ovpApp/components/player/remote-player-controls.html',\n        controller: class RemotePlayerControls {\n            /* @ngInject */\n            constructor(version, modal, StbSettingsService) {\n                angular.extend(this, {version, modal, StbSettingsService});\n            }\n\n            $onChanges() {\n                this.getCCSettings();\n            }\n\n            getCCSettings() {\n                if (this.stb) {\n                    this.StbSettingsService.getSTBProperties(this.stb).then(result => {\n                        this.allowedCCOptions = result.closedCaptioning;\n                        this.allowedSAPOptions = result.secondaryAudio;\n\n                        // Set default value for ccEnabled and sapEnabled\n                        this.isCCEnabled = (this.allowedCCOptions.selection.defaultValue === 'Off') ?\n                            false : true;\n                        this.isSAPAvailable = (this.allowedSAPOptions.selection) ? true : false;\n                        this.isSapEnabled = (!this.isSAPAvailable ||\n                            this.allowedSAPOptions.selection.defaultValue === 'Off') ? false : true;\n\n                        this.StbSettingsService.getPreferences(this.stb).then(preferences => {\n                            this.ccSettings = preferences.closedCaptioning || {};\n                            this.sapSettings = preferences.secondaryAudio || {};\n\n                            this.isCCEnabled = (this.ccSettings.selection === 'Off') ? false : true;\n                            this.isSapEnabled = (!this.isSAPAvailable || !this.sapSettings ||\n                                !this.sapSettings.selection || this.sapSettings.selection === 'Off') ?\n                                false : true;\n                        });\n                    });\n                }\n            }\n\n            // ********** Toggle Settings **************\n\n            showStbCcSettings() {\n                this.modal.open({\n                    component: 'ovp-remote-player-caption-settings',\n                    windowClass: 'ovp-player-caption-settings',\n                    showCloseIcon: false,\n                    resolve: {\n                        'stb': this.stb,\n                        'allowedCCOptions': this.allowedCCOptions,\n                        'ccSettings': this.ccSettings\n                    }\n                }).result.then(() => this.getCCSettings());\n            }\n\n            ccToggle() {\n                this.isCCEnabled = !this.isCCEnabled;\n                let ccValue = this.isCCEnabled ? 'On' : 'Off';\n                this.StbSettingsService.updateCCSettings(this.stb, {\n                    'selection': ccValue\n                }).then(preferences => {\n                    this.isCCEnabled = (preferences.closedCaptioning.selection === 'Off') ? false : true;\n                }, () => {\n                    this.isCCEnabled = !this.isCCEnabled; // Reset on error\n                });\n            }\n\n            sapToggle() {\n                this.isSapEnabled = !this.isSapEnabled;\n                this.StbSettingsService.toggleSAP(this.stb, (this.isSapEnabled ? 'On' : 'Off'))\n                    .then(preferences => {\n                        this.isSapEnabled = (!preferences.secondaryAudio ||\n                            preferences.secondaryAudio.selection === 'Off') ? false : true;\n                    }, () => {\n                        this.isSapEnabled = !this.isSapEnabled; // Reset on error\n                    });\n            }\n\n            // ***************** Toggle Images\n\n            ccToggleImage() {\n                if (this.ccHovered) {\n                    return this.version.appVersion + '/images/cc-active.svg';\n                } else {\n                    return this.isCCEnabled ? this.version.appVersion +\n                        '/images/cc-active.svg' : this.version.appVersion + '/images/cc.svg';\n                }\n            }\n\n            sapToggleImage() {\n                if (this.sapIconHovered) {\n                    return this.version.appVersion + '/images/sap-dvs-active.svg';\n                } else {\n                    return this.isSapEnabled ? this.version.appVersion +\n                        '/images/sap-dvs-active.svg' : this.version.appVersion + '/images/sap-dvs.svg';\n                }\n            }\n\n            ccSettingsImage() {\n                if (this.ccSettingsHovered) {\n                    return this.version.appVersion + '/images/settings-active.svg';\n                } else {\n                    return this.version.appVersion + '/images/settings.svg';\n                }\n            }\n        }\n    });\n})();\n"],"sourceRoot":"/source/"}