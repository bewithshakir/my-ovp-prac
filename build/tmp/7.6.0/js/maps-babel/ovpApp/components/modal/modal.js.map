{"version":3,"sources":["ovpApp/components/modal/modal.js"],"names":[],"mappings":"AAAA;;AAAA,CAAC,YAAY;IACT;;;IAEA,QACK,OAAO,2BAA2B,CAC/B,oCACA,iBAEH,QAAQ,SAAS;;;IAGtB,SAAS,MAAM,WAAW,cAAc,WAAW,eAAe,YAAY;QAC1E,IAAI,SAAS;;QAEb,IAAM,UAAU;YACZ,MAAA;;;QAGJ;;QAEA,OAAO;;;;QAIP,SAAS,WAAW;YAChB,aAAa,UAAU,IAAI,YAAY;gBACnC,OAAO,QAAQ,UAAA,OAAK;oBAFhB,OAEoB,MAAM,QAAQ;;gBACtC,SAAS;;;;QAIjB,SAAS,OAAmB;YAAxB,IAAU,UAAO,UAAA,UAAA,KAAA,UAAA,OAAA,YAAG,KAAE,UAAA;;YACtB,WAAW,MAAM;YACjB,IAAI,CAAC,QAAQ,mBAAmB;gBAC5B,IAAI,QAAQ,kBAAkB,OAAO;oBACjC,QAAQ,oBAAoB;uBACzB;oBACH,QAAQ,oBAAoB;;;;YAIpC,IAAI,UAAO;YACX,IAAI,cAAc,aAAa;;;gBAG3B,UAAU,UAAU,KAAK,kBAAkB,GAAG;mBAC3C;gBACH,UAAU,UAAU,KAAK,UAAU,GAAG;;YAE1C,QAAQ,WAAW,QAAQ,SAAS,KAAK;;YAEzC,IAAM,QAAQ,UAAU,KAAK;;YAE7B,OAAO,KAAK;YACZ,MAAM,OAAO,KAAK,YAAM;gBACpB,IAAM,QAAQ,OAAO,QAAQ;gBAC7B,IAAI,QAAQ,CAAC,GAAG;oBACZ,OAAO,OAAO,OAAO;;;;YAI7B,OAAO;;;KAGd","file":"ovpApp/components/modal/modal.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('ovpApp.components.modal', [\n            'ovpApp.directives.ovp-fullscreen',\n            'ui.bootstrap'\n        ])\n        .factory('modal', modal);\n\n    /* @ngInject */\n    function modal($uibModal, $transitions, $document, ovpFullscreen, $rootScope) {\n        let modals = [];\n\n        const service = {\n            open\n        };\n\n        activate();\n\n        return service;\n\n        ////////////////\n\n        function activate() {\n            $transitions.onSuccess({}, function () {\n                modals.forEach(modal => modal.dismiss('navigated away'));\n                modals = [];\n            });\n        }\n\n        function open(options = {}) {\n            $rootScope.$emit('Analytics:modal-start');\n            if (!options.windowTemplateUrl) {\n                if (options.showCloseIcon !== false) {\n                    options.windowTemplateUrl = '/js/ovpApp/components/modal/window-frame-with-close-icon.html';\n                } else {\n                    options.windowTemplateUrl = '/js/ovpApp/components/modal/window-frame.html';\n                }\n            }\n\n            let modalEl;\n            if (ovpFullscreen.isEnabled()) {\n                //Need to append dialog in playback context to the\n                //player wrapper so that they also show up in full screen\n                modalEl = $document.find('#playerWrapper').eq(0);\n            } else {\n                modalEl = $document.find('#modal').eq(0);\n            }\n            options.appendTo = modalEl.length > 0 && modalEl;\n\n            const modal = $uibModal.open(options);\n\n            modals.push(modal);\n            modal.closed.then(() => {\n                const index = modals.indexOf(modal);\n                if (index > -1) {\n                    modals.splice(index, 1);\n                }\n            });\n\n            return modal;\n        }\n    }\n})();\n"],"sourceRoot":"/source/"}