{"version":3,"sources":["ovpApp/settings/purchasePin/purchasePin.js"],"names":[],"mappings":"AAAA;;AAAC,CAAA,YAAY;;2JACT;IACA,QAAQ,OAAO,+BAA+B,CAC1C,4BACA,mCACA,sCACA,oBAEH,WAAW,yBAAyB;;;IAGrC,SAAS,sBAAsB,QAAQ,YAAY,aAAa,MAAM,oBAClE,UAAU,QAAQ,oBAAoB;;QAEtC,YAAY,+BAA+B,EAAC,QAAQ,QAAQ,YAAY;QACxE,OAAO,8BAA8B;QACrC,OAAO,SAAS;QAChB,OAAO,WAAW;;QAGlB,OAAO,OAAO,YAAY;YACtB,OAAO,8BAA8B;YACrC,WAAW,WAAW,sBAAsB,OAAO;;;QAGvD,OAAO,mBAAmB,YAAY;YAClC,IAAI,CAAC,OAAO,UAAU,CAAC,OAAO,UAAU;gBACpC,OAAO,8BAA8B,KAAK,YAAM;oBAC5C,OAAO;oBACP,OAAO,SAAS;oBAChB,OAAO,WAAW;;mBAEnB,IAAI,OAAO,6BAA6B;gBAC3C,OAAO,8BAA8B,KAAK,YAAM;oBAC5C,OAAO;;mBAER,IAAI,CAAC,OAAO,6BAA6B;gBAC5C,OAAO;;;;QAIf,OAAO,6BAA6B,YAAY;YAC5C,IAAI,OAAO,gCAAgC,OAAO;gBAC9C,OAAO,8BAA8B;gBACrC,mBAAmB;;;;;;mBAMhB;oBACH,OAAO,8BAA8B;oBACrC,mBAAmB;;;;;;;;;QAS3B,OAAO;;KAEV","file":"ovpApp/settings/purchasePin/purchasePin.js","sourcesContent":["(function () {\n    'use strict';\n    angular.module('ovpApp.settings.purchasePin', [\n        'ovpApp.purchasePinDialog',\n        'ovpApp.components.ovp.ovpSwitch',\n        'ovpApp.services.purchasePinService',\n        'ovpApp.messages'\n    ])\n    .controller('PurchasePinController', PurchasePinController);\n\n    /* @ngInject */\n    function PurchasePinController($scope, $rootScope, $controller, $log, purchasePinService,\n        messages, $state, purchaseSwitchFlag) {\n\n        $controller('PurchasePinDialogController', {$scope: $scope, dialogText: messages});\n        $scope.purchasePinEnabledForClient = false;\n        $scope.hasPin = false;\n        $scope.unlocked = false;\n\n\n        $scope.init = function () {\n            $scope.purchasePinEnabledForClient = purchaseSwitchFlag;\n            $rootScope.$broadcast('pageChangeComplete', $state.current);\n        };\n\n        $scope.togglePinEnabled = function () {\n            if (!$scope.hasPin || !$scope.unlocked) {\n                $scope.handlePurchasePINValidation().then(() => {\n                    $scope.togglePurchasePinForClient();\n                    $scope.hasPin = true;\n                    $scope.unlocked = true;\n                });\n            } else if ($scope.purchasePinEnabledForClient) {\n                $scope.handlePurchasePINValidation().then(() => {\n                    $scope.togglePurchasePinForClient();\n                });\n            } else if (!$scope.purchasePinEnabledForClient) {\n                $scope.togglePurchasePinForClient();\n            }\n        };\n\n        $scope.togglePurchasePinForClient = function () {\n            if ($scope.purchasePinEnabledForClient === false) {\n                $scope.purchasePinEnabledForClient = true;\n                purchasePinService.enablePurchasePINForClient();\n\n                // TODO: Analytics Event\n                // $rootScope.$emit('EG:settingPurchasePinToggled', {\n                //     enabled: true\n                // });\n            } else {\n                $scope.purchasePinEnabledForClient = false;\n                purchasePinService.disablePurchasePINForClient();\n\n                // TODO: Analytics Event\n                // $rootScope.$emit('EG:settingPurchasePinToggled', {\n                //     enabled: false\n                // });\n            }\n        };\n\n        $scope.init();\n    }\n}());\n"],"sourceRoot":"/source/"}